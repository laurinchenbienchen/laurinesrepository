<!DOCTYPE html>
<html>
<head>
    <title>Book List</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="../static/style.css">
</head>
<body>
    <div class="container">
        <h1 class="my-books-title">My Library</h1>

        <!-- Search Bar -->
        <form action="/" method="get" class="form-inline mb-3">
            <div class="form-group mr-2">
                <input type="text" name="search" class="form-control" placeholder="Search by Title or Author">
            </div>
            <button type="submit" class="btn btn-primary">Search</button>
        </form>

        <!-- Book List -->
        <ul class="list-group mt-3">
            {% for book in books %}
            <li class="list-group-item">
                <img src="{{ book.image or url_for('static', filename='no_image_available.png') }}" alt="{{ book.title }}" style="width: 50px; height: 75px; margin-right: 10px;">
                {{ book.title }} by {{ book.author }}
                <form action="/delete/{{ book.id }}" method="post" style="display: inline;">
                    <button type="submit" class="btn btn-danger float-right">Delete</button>
                </form>
            </li>
            {% endfor %}
        </ul>

        <!-- Pagination Links -->
        <nav aria-label="Book navigation">
            <ul class="pagination mt-3">
                {% if page > 1 %}
                <li class="page-item">
                    <a class="page-link" href="?page={{ page - 1 }}{% if search %}&search={{ search }}{% endif %}" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="sr-only">Previous</span>
                    </a>
                </li>
                {% endif %}

                {% for num in range(1, pages + 1) %}
                <li class="page-item {% if num == page %}active{% endif %}">
                    <a class="page-link" href="?page={{ num }}{% if search %}&search={{ search }}{% endif %}">{{ num }}</a>
                </li>
                {% endfor %}

                {% if page < pages %}
                <li class="page-item">
                    <a class="page-link" href="?page={{ page + 1 }}{% if search %}&search={{ search }}{% endif %}" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                        <span class="sr-only">Next</span>
                    </a>
                </li>
                {% endif %}
            </ul>
        </nav>

        <!-- Add Book Button -->
        <a href="/add" class="btn btn-success mt-3">Add a Book</a>
    </div>
</body>
</html>
